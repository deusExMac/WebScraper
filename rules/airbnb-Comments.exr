#
# json format of 
# 
# version 0.01@18/05/2022
#
#


{
"libraryDescription": "Library to crawl airbnb",
"csvLineFormat":["username", "comment"],



"renderPages": True,

# How to launch browser. The build in chromium that ships  with pyppeteer or an existing Chromium or Chrome executable on local computer.
# NOTE: this field is taken into consideration only if renderPages is se to True.
#"launchParameters" : { "executablePath":"F:\\ProgramFiles\\Programs\\Google\\Chrome\\Application\\chrome.exe", "userDataDir" : "C:\\Users\\Manolis\\AppData\\Local\\Google\\Chrome\\User Data" },

"launchParameters" : { "executablePath":"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome", "userDataDir" : "" },

# win: C:\\Users\\Manolis\\AppData\\Local\\Google\\Chrome\\User Data

"ruleDynamicElements": [ 
            
		 
		 # Close by clicking on the X of the "translation on" screen that pops
		 # up when accessing as a guest airbnb listings so that it closes. Whait for the button
		 # showing the comments to appear.
		 {
		 		     "dpcType":"click",
		 		     "dpcPageElement":"div._1piuevz",
		 		     "dpcScrolldown":0,
		 		     "dpcWaitFor":"button._11eqlma4"
		 },
		 
		 # Click on the XXX reviews link/button that'll pop up a screen showing the comments. 
		 # Wait for the pop up to appear. 
		 {
		     "dpcType":"click",
		     "dpcPageElement":"button._11eqlma4",
		     "dpcScrolldown":0,
		     "dpcWaitFor":"div._17itzz4"
		 },

                 # Scroll the windows popup with the comments 8 times.
		 {
		     "dpcType":"scroll",
		     "dpcPageElement":"div._17itzz4",		     
		     "dpcScrolldown":8,
		     "dpcWaitFor":""
		 }
 
],

"requestUserAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:106.0) Gecko/20100101 Firefox/106.0",

"library": [

# r1are2x1 dir dir-ltr
{
 "ruleName": "getComments"
 "ruleDescription": "Extracting the comments from a listing"
 "ruleURLActivationCondition": ["www\.airbnb\.com/rooms.*"]
 "rulePreconditionType": "Any"
 "rulePreconditions" : []
 
 "ruleCSSSelector": "div.r1are2x1"
 "ruleTargetAttribute": "text",
 "ruleContentCondition": "",
 
 # These selectors will be applied to all elements 
 # returned by ruleCSSSelector
 # It is assumed that these selectors return ONLY one
 # matchine element. Currently only the text of these elements is
 # extracted.
 "rulePostCSSSelector" : ["h3._14i3z6h", "span.ll4r2nl"],
 
 # One-to-one correspondence with rulePostCSSSelector 
 # selector list. E.g. here, data extracted by h3._14i3z6h
 # will be named usename. 
 "ruleReturnedValueNames" : ["username", "comment"],

 # This refers to the result of ruleCSSSelector
 "ruleReturnsMore": True,
 
 "ruleReturnedMatchPos": -1,
 "ruleReturningMoreIsError": False
 
},

{
 "ruleName": "getTitle"
 "ruleDescription": "Extracting the title of room"
 "ruleURLActivationCondition": ["www\.airbnb\.com/rooms.*"]
 "rulePreconditionType": "Any"
 "rulePreconditions" : []
 
 "ruleCSSSelector": "h1._fecoyn4"
 "ruleTargetAttribute": "text"
 "ruleContentCondition": ""
 "ruleReturnsMore": False
 "ruleReturnedMatchPos": 0
 "ruleReturningMoreIsError": False
 
}

]


}